# 📢 PowerPlay 푸시 알림 케이스 정리

이 문서는 PowerPlay 애플리케이션에서 발송되는 모든 푸시 알림 케이스를 정리한 것입니다.

## 1. 경기 관련 (사용자 대상)

| 상황 (Trigger) | 수신자 (Recipient) | 제목 (Title) | 메시지 내용 (Body) | 이동 (Link) |
| :--- | :--- | :--- | :--- | :--- |
| **경기 참가 확정** | 참가자 | 경기 참가 확정 🏒 | `{경기장} ({시간}) 참가가 확정되었습니다. ({금액}원 차감)`<br>*(또는 참가 신청 완료)* | `/match/{id}` |
| **대기명단 등록** | 대기 신청자 | 대기명단 등록 완료 ⏳ | `{경기장} ({시간}) 대기명단에 등록되었습니다. 자리 발생 시 알려드립니다.` | `/match/{id}` |
| **대기 → 참가 (자동 확정)** | 대기자 (포인트 충분) | 대기 전환 및 참가 확정 🎉 | `{경기장} ({시간}) 빈자리가 생겨 대기에서 참가로 전환되었습니다! ({금액}원 차감)` | `/match/{id}` |
| **대기 → 참가 (입금 대기)** | 대기자 (포인트 부족) | 대기 전환 (입금 필요) ⚡️ | `{경기장} ({시간}) 빈 자리가 생겨 대기에서 참가로 전환되었습니다. 경기에 참가하기 위해 결제가 필요합니다!` | `/match/{id}` |
| **경기 취소 (환불 포함)** | 참가자 | 환불 완료 💰 | `경기 취소로 {금액}원이 환불되었습니다.` | `/mypage/points` |
| **신청 취소 (입금 대기)** | 참가자 (미입금) | 신청 취소 완료 ↩️ | `입금 대기 중이던 경기 신청이 취소되었습니다.` | `/mypage` |
| **신청 취소 (무료/대기)** | 참가자 (무료/대기) | 취소 완료 ↩️ | `무료로 참가한 경기가 취소되었습니다.`<br>`대기 신청이 취소되었습니다.` | `/mypage` |
| **신청 취소 (환불 불가)** | 참가자 (당일 취소 등) | 취소 완료 (환불 불가) ❌ | `경기 당일 취소로 환불이 불가하며, 신청이 취소되었습니다.` | `/mypage` |
| **관리자에 의한 경기 취소** | 모든 참가자 | 경기 취소 알림 🚫/📢 | `관리자 사정으로 {경기장} ({시간}) 경기가 취소되었습니다. (확정자는 전액 환불)` | `/mypage` |
| **관리자 입금 확인** | 미입금 참가자 | 참가 확정 ✅ | `대기하시던 경기({시간}) 참가가 확정되었습니다.` | `/match/{id}` |

## 2. 관리/운영 관련 (경기 생성자 대상)

| 상황 (Trigger) | 수신자 (Recipient) | 제목 (Title) | 메시지 내용 (Body) | 이동 (Link) |
| :--- | :--- | :--- | :--- | :--- |
| **새 참가자 신청** | 경기 생성자 (본인 제외) | 새 참가자 🏒 | `{이름}님이 {경기장} ({시간}) 경기에 신청했습니다. [(장비대여)]` | `/admin/matches` |
| **새 대기자 신청** | 경기 생성자 (본인 제외) | 새 대기자 ⏳ | `{이름}님이 {경기장} ({시간}) 경기에 대기 신청했습니다. [(장비대여)]` | `/admin/matches` |

## 3. 포인트/결제 관련 (사용자 대상)

| 상황 (Trigger) | 수신자 (Recipient) | 제목 (Title) | 메시지 내용 (Body) | 이동 (Link) |
| :--- | :--- | :--- | :--- | :--- |
| **충전 신청 접수** | 신청자 | 충전 신청 완료 📝 | `{금액}원 충전을 신청했습니다. 입금 확인 후 충전이 완료됩니다.` | `/mypage/points` |
| **충전 완료** | 신청자 | 충전 완료 💰 | `{금액}원이 충전되었습니다. 현재 잔액: {잔액}원` | `/mypage/points` |
| **충전 완료 + 경기 확정** | 신청자 (미입금 경기 존재 시) | 충전 완료 + 경기 확정 ✅ | `{금액}원이 충전되었습니다. {개수}개의 경기 참가가 자동 확정되었습니다.` | `/mypage/points` |
| **충전 거부** | 신청자 | 충전 요청 거부 ❌ | `{금액}원 충전 요청이 거부되었습니다. 사유: {사유}` | `/mypage/points` |

## 4. 시스템 감사/알림 (슈퍼유저 대상)

모든 중요 활동은 감사 로그(Audit Log)와 함께 **슈퍼유저**에게 푸시 알림이 전송됩니다.

| 상황 (Trigger) | 제목 (Title) | 메시지 내용 예시 (Body Example) |
| :--- | :--- | :--- |
| **동호회 생성** | 🔔 알림: CLUB_CREATE | `{email}님이 새 동호회 '{동호회명}'를 생성했습니다.` |
| **경기 생성** | 🔔 알림: MATCH_CREATE | `[{팀명}] {관리자}님이 새 매치를 생성했습니다. (일시: {시간})` |
| **경기 삭제** | 🔔 알림: MATCH_DELETE | `[{팀명}] {관리자}님이 {경기장} ({시간}) 매치를 삭제했습니다.` |
| **경기 참가/취소** | 🔔 알림: MATCH_JOIN / MATCH_CANCEL | `{이름}님이 {경기장} 경기에 참가 확정했습니다.` |
| **충전 요청** | 🔔 알림: POINT_CHARGE_REQUEST | `{email}님이 {금액}원 충전을 요청했습니다.` |
